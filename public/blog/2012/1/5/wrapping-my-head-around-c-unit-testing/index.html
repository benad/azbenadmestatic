<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->
	<head>
		<meta charset="utf-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
                <title>Wrapping my head around C unit testing... - Benad's Web Site</title>
		<meta name="description" content=""/>
		<meta name="viewport" content="width=device-width"/>
		<link rel="stylesheet" href="/css/bootstrap.css"/>
		<link rel="stylesheet" href="/css/bootstrap-responsive.css"/>
		<link rel="stylesheet" href="/css/main.css"/>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="//feeds.feedburner.com/benad">
		<script src="/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
	</head>
	<body>
            <!--[if lt IE 7]>
		<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/"> upgrade your browser</a> to improve your experience.</p>
                <![endif]-->
		<div class="container">

<div class="row">
        <h1 class="title">Benad's Web Site</h1>
        <h2 class="pageheader">Wrapping my head around C unit testing...</h2>
</div>
<div class="row">
        <div class="span2 pull-right sidebar">
                <p><a href="//benad.me/index.html">Home</a></p>
                <p><a href="/blog">Blog</a></p>
                <p><a href="//benad.me/me.html">About Me</a></p>
                <p><a href="//benad.me/meta.html">About This Site</a></p>
                <p><a href="//benad.me/articles.html">Articles</a></p>
                <p><a href="//benad.me/links.html">Links</a></p>
        </div>

        <div class="span8 offset2">
                <div class='posterous_autopost'>Today I started using for the first time some unit testing libraries for C and C++ (CUnit <a href="http://cunit.sf.net/">http://cunit.sf.net/</a> and CppUnit <a href="http://cppunit.sf.net/">http://cppunit.sf.net/</a> , respectively). What I'm still unsure about is how those fit in build and test process. <p /> For example with Java and JUnit, the compiled classes are compiled in a separate directory, and running the tests simply involves adding those to the classpath and setting the Main class to JUnit which will run the tests for you. <p /> With C and C++ though, you effectively have to change your one and only available "main" function, either by using a macro in place or by compiling a different "main.c" in it's place. Because of this, you have a choice of making the unit testing code part of your released binary, or recompiling your code with different macros or settings to run it in "test mode". But if you run unit testing on a differently compiled version of the code, there's still a small chance that this change would make the code different enough to make the testing inconclusive. <p /> On top of that, many unit testing libraries are LGPL. If you don't know, LGPL has a clause that forces your software license's to allow for reverse-engineering of the interface between the code and the LGPL library. Not only this is a big "no no" for commercial code, but on top of that the "interface" would touch so many parts of your test code (and thus your actual code) that by extension it would imply that you would allow all your code to be fully reverse-engineered. That's why released code cannot contain anything related to those unit testing libraries, introducing the risk that the code reacts differently between the unit tested version and the released one. Arg! <p /> Maybe recompiling the code to run unit testing (maybe even including code coverage) is not as much of an issue as I think it is and is actually commonplace. I guess as long as there is some kind of smoke testing on the ready-for-release executable, combined with thorough unit testing on the "test version", it should be sufficient.</div>

                <p>Published on January 5, 2012 at 16:17 EST</p>
                <p>Older post: <a href="https://benad.me/blog/2012/1/4/itunes-match-is-it-worth-it">iTunes Match: Is it worth it?</a></p>
                <p>Newer post: <a href="https://benad.me/blog/2012/1/6/the-problem-with-akira">The Problem With Akira</a></p>
        </div>
        <div id="disqus_thread" class="span8 offset2"></div>
</div>
			<footer>
				<hr/>
				<p>Benad's Web Site by Benoit Nadeau is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/2.5/ca/">Creative Commons Attribution-Share Alike 2.5 Canada License</a></p>
			</footer>
		</div>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
		<script src="/js/vendor/bootstrap.min.js"></script>
		<script src="/js/main.js"></script>
		<script>
		var _gaq=[['_setAccount','UA-6588628-1'],['_trackPageview']];
		(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
		g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
		s.parentNode.insertBefore(g,s)}(document,'script'));
		</script>
		<script>
var disqus_config = function () {
this.page.url = window.location.protocol + "//" + window.location.hostname + "/blog/2012/1/5/wrapping-my-head-around-c-unit-testing";
this.page.identifier = "https://benad.me/blog/2012/1/5/wrapping-my-head-around-c-unit-testing";
this.page.title = "Wrapping my head around C unit testing...";
};
(function() {
if (window.location.hostname != 'benad.me')
    return;
var d = document, s = d.createElement('script');
var disqus_shortname = "benadmeblog";
s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
	</body>
</html>

